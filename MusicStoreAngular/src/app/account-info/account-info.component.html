<div *ngIf="account">
  <p>{{account.user.username}}</p>
  <p>{{account.user.password}}</p>

  <label>name:</label>
  <input type="text" [readOnly]="!isEditing('account')" [(ngModel)]="account.name">
  <br>
  <label>Contact:</label>
  <input type="text" [readOnly]="!isEditing('account')" [(ngModel)]="account.contact">
  <br>
  <label>Gender:</label>
  <select id="gender" [disabled]="!isEditing('account')" [(ngModel)]="account.gender" >
    <option value="F">Female</option>
    <option value="M">Male</option>
    <option value="O">Other / Rather not say</option>
  </select>
  <button *ngIf="!isEditing('account')" (click)="editAccountInfo()">edit personal info</button>
  <button *ngIf="isEditing('account')" (click)="saveEditedAccount()">save edits</button>
  <button *ngIf="isEditing('account')" (click)="cancelEditingAccount()">cancel edits</button>

  <h4>My Addresses:</h4>
  <div *ngFor="let a of addrs">
    <h5>Address: </h5>
    <p>{{a.street}}</p>
    <p>{{a.code}}</p>
    <p>{{a.country}}</p>
    <p>{{a.door}}</p>
    <p>{{a.city}}</p>
  </div>
  <button *ngIf="!adding_addr" (click)="addAddress()">add a new address</button>

  <!-- add new address form -->
  <div *ngIf="adding_addr">
    <!-- street -->
    <div>
      <label>Street:</label>
      <input type="text" [(ngModel)]="new_addr.street">
      <span *ngFor="let error of errors['street']"> {{error}} </span>
    </div>

    <!-- door number -->
    <div>
      <label>Door number:</label>
      <input type="text" [(ngModel)]="new_addr.door">
      <span *ngFor="let error of errors['door']"> {{error}} </span>
    </div>

    <!-- city -->
    <div>
      <label>City:</label>
      <input type="text" [(ngModel)]="new_addr.city">
      <span *ngFor="let error of errors['city']"> {{error}} </span>
    </div>

    <!-- post code -->
    <div>
      <label>Post code:</label>
      <input type="text" [(ngModel)]="new_addr.code">
      <span *ngFor="let error of errors['code']"> {{error}} </span>
    </div>

    <!-- country -->
    <div>
      <label>Country:</label>
      <!--<input type="text" [(ngModel)]="new_addr.country">-->
      <select [(ngModel)]="new_addr.country">
        <option value="" selected disabled>select an option</option>
        <optgroup label="Africa">
          <option *ngFor="let c of COUNTRIES['Africa']" value="{{c[0]}}">{{c[1]}}</option>
        </optgroup>
        <optgroup label="America">
          <option *ngFor="let c of COUNTRIES['America']" value="{{c[0]}}">{{c[1]}}</option>
        </optgroup>
        <optgroup label="Asia">
          <option *ngFor="let c of COUNTRIES['Asia']" value="{{c[0]}}">{{c[1]}}</option>
        </optgroup>
        <optgroup label="Europe">
          <option *ngFor="let c of COUNTRIES['Europe']" value="{{c[0]}}">{{c[1]}}</option>
        </optgroup>
        <optgroup label="Oceania">
          <option *ngFor="let c of COUNTRIES['Oceania']" value="{{c[0]}}">{{c[1]}}</option>
        </optgroup>
      </select>
      <!-- fim do select para os paises -->

      <span *ngFor="let error of errors['country']"> {{error}} </span>
    </div>

    <span *ngFor="let error of errors['others']"> {{error}} </span>

    <!-- save address -->
    <button (click)="saveNewAddress()">save address</button>
    <button (click)="cancel()">cancel</button>



  </div>
</div>

<div class="container emp-profile" *ngIf="account">
    <div class="row">

      <div class="col-md-10">
        <div class="profile-head">
          <h5>
            {{account.name}}
          </h5>
          <h6>
            Our favourite <span *ngIf="!account.user.isStaff">client</span><span *ngIf="account.user.isStaff">admin</span>
          </h6>
          <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item">
              <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">About</a>
            </li>
          </ul>
        </div>
      </div>
      <div class="col-md-2">
        <input type="submit" class="profile-edit-btn" name="btnAddMore" value="Edit Profile"/>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div class="tab-content profile-tab" id="myTabContent">
          <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
            <div class="row">
              <div class="col-md-6">
                <p style="color: black">Name</p>
              </div>
              <div class="col-md-6">
                <p>{{account.name}}</p>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <p style="color: black">Email</p>
              </div>
              <div class="col-md-6">
                <p>{{account.user.username}}</p>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <p style="color: black">Phone</p>
              </div>
              <div class="col-md-6">
                <p>{{account.contact}}</p>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <p style="color: black">Gender</p>
              </div>
              <div class="col-md-6">
                <p>{{account.gender}}</p>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <p style="color: black">Date Joined</p>
              </div>
              <div class="col-md-6">
                <p>{{account.user.dateJoined}}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
</div>

<div *ngIf="!account">Not logged in...</div>

<!--
<select>
  <option value="" selected hidden disabled>select an option</option>
  <optgroup label="Africa">
    <option *ngFor="let c of COUNTRIES['Africa']" value="{{c[0]}}">{{c[1]}}</option>
  </optgroup>
  <optgroup label="America">
    <option *ngFor="let c of COUNTRIES['America']" value="{{c[0]}}">{{c[1]}}</option>
  </optgroup>
  <optgroup label="Asia">
    <option *ngFor="let c of COUNTRIES['Asia']" value="{{c[0]}}">{{c[1]}}</option>
  </optgroup>
  <optgroup label="Europe">
    <option *ngFor="let c of COUNTRIES['Europe']" value="{{c[0]}}">{{c[1]}}</option>
  </optgroup>
  <optgroup label="Oceania">
    <option *ngFor="let c of COUNTRIES['Oceania']" value="{{c[0]}}">{{c[1]}}</option>
  </optgroup>
</select>

-->
